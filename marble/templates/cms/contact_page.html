{% extends "cms/base.html" %}
{% load static %}

{% block content %}
<div class="marble-contact">
    <div class="marble-contact-nav">
        <img src="{% static 'images/Two-Rock-Software-Logo.svg' %}" alt="Two Rock Software LLC Logo" />
    </div> 

    <div class="container">
        <div class="row">
            <div class="col-md-6 order-md-2">
                <h1>{{ page.title }}</h1>
            </div>

            <div class="col-md-6">
                <div class="marble-rock" style="background-image: url('{% static 'backgrounds/contact-rock.svg' %}');">
                    <p class="marble-contact-content">
                        {{ page.content }}
                    </p>
                </div>
            </div>
        </div>

        <div class="row justify-content-end">
            <div class="col-md-6">
                <form class="marble-contact-form" method="POST" action="{% url 'contact_form' %}" id="twoRockContactForm">
                    {% csrf_token %}
                    <div class="form-group mb-4">
                        <label for="name" class="form-label visually-hidden">Name</label>
                        <input type="text" class="form-control" id="name" placeholder="Name" name="name" value="{{ form.data.name }}"/>
                        {{ form.name.errors }}
                    </div>

                    <div class="form-group mb-4">
                        <label for="contactOrganization" class="form-label visually-hidden">Organization</label>
                        <input type="text" class="form-control" id="contactOrganization" placeholder="Organization" name="organization" value="{{ form.data.organization }}"/>
                        {{ form.organization.errors }}
                    </div>

                    <div class="form-group mb-4">
                        <label for="email" class="form-label visually-hidden">Email Address</label>
                        <input type="email" class="form-control" id="email" placeholder="Email Address" name="email" value="{{ form.data.email }}" />
                        {{ form.email.errors }}
                    </div>

                    <div class="form-group row mb-4">
                        <div class="col-6">
                            <label for="contactPhone" class="form-label visually-hidden">Phone Number</label>
                            <input type="text" class="form-control" id="contactPhone" placeholder="Phone Number" name="phone_number" value="{{ form.data.phone_number }}"/>
                            {{ form.phone_number.errors }}
                        </div>
                        <div class="col-6">
                            <label for="contactBudget" class="form-label visually-hidden">Budget Range</label>
                            <input type="text" class="form-control" id="contactBudget" placeholder="Budget" name="budget" value="{{ form.data.budget }}"/>
                            {{ form.budget.errors }}
                        </div>
                    </div>

                    <div class="form-group mb-4">
                        <label for="contactTextarea" class="form-label visually-hidden">Describe your project</label>
                        <textarea class="form-control" rows="4" id="contactTextarea" placeholder="What can we build together?" name="body">{{ form.data.body }}</textarea>
                        {{ form.body.errors }}
                        <input type="hidden" name="g-recaptcha-response" id="g-recaptcha-response" />
                    </div> 

                    <button type="submit" class="btn btn-outline-white">Let's Rock</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra-js %}
    <script src='https://www.google.com/recaptcha/api.js?render={{ GOOGLE_RECAPTCHA_SITE_KEY }}'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

    <script>
        //global grecaptcha
        grecaptcha.ready(function() {
          grecaptcha.execute('{{ GOOGLE_RECAPTCHA_SITE_KEY }}', {action: "/contact/"}).then(function(token) {
            document.getElementById('g-recaptcha-response').value = token;
          });
        });
    </script>
{% endblock %}
